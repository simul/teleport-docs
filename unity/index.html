<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Teleport Unity SDK &mdash; Teleport VR  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="https://unpkg.com/mermaid@9.4.0/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Reference Implementation" href="../reference/index.html" />
    <link rel="prev" title="Client" href="../client/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
			<a href="../index.html"  class="" >
				
					<span class="sidebartitle">
						Teleport VR
					</span>
				
					<img src="../_static/TeleportLogo-64.png" class="logo" alt="Logo" />
			</a>
<div role="search">
    <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
        <label class="search-label" for="q">Search the teleport documentation</label>
        <input type="text" name="q" id="q" placeholder="Search..." aria-label="Search docs" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/index.html">Client</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Teleport Unity SDK</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#get-the-example-project">Get the Example Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-the-plugin-to-an-existing-project">Install the plugin to an existing project</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-from-source">Building from Source</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inputs">Inputs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mapping-types">Mapping types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pose-mapping">Pose Mapping</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#player-session-hierarchy">Player Session Hierarchy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocol.html">The Teleport VR Protocol</a></li>
</ul>

        </div>
      </div>
    </nav>

    <div data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
		<h2 class="wy-nav-top">Navigation</h2><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Teleport VR</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Teleport Unity SDK</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/unity/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="teleport-unity-sdk">
<h1>Teleport Unity SDK<a class="headerlink" href="#teleport-unity-sdk" title="Permalink to this heading">¶</a></h1>
<p>The Teleport Unity SDK provides everything necessary to run a Teleport server as a Unity application. In typical usage, only the server need run Unity - the client
will be a standard Teleport client app such as the Teleport reference client.</p>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p>You can:</p>
<blockquote>
<div><ul class="simple">
<li><p>Get the example project TeleportUnityExample, or</p></li>
<li><p>Install the plugin to an existing project.</p></li>
</ul>
</div></blockquote>
<section id="get-the-example-project">
<h3>Get the Example Project<a class="headerlink" href="#get-the-example-project" title="Permalink to this heading">¶</a></h3>
<p>You can download a minimal example Unity project for Teleport at <a class="reference external" href="https://github.com/simul/TeleportUnityExample">git&#64;github.com:simul/TeleportUnityExample.git</a>.
Be sure to update the submodules: the actual Teleport plugin is a submodule at Assets/Teleport in the example repo.</p>
</section>
<section id="install-the-plugin-to-an-existing-project">
<h3>Install the plugin to an existing project<a class="headerlink" href="#install-the-plugin-to-an-existing-project" title="Permalink to this heading">¶</a></h3>
<p>Get the Teleport Unity plugin from its Git repo at <a class="reference external" href="https://github.com/simul/teleport-unity">git&#64;github.com:simul/teleport-unity.git</a>.</p>
<p>Or download it as a .unitypackage from <a class="reference external" href="https://teleportvr.io/downloads">https://teleportvr.io/downloads</a>.</p>
<p>You can install it as a Git submodule or copy the code directly, it should go in a subfolder of your Unity project’s Assets folder, e.g. Assets/Teleport.</p>
<p>From your unity project, launch the Package Manager, and install the Core RP Library.</p>
</section>
<section id="building-from-source">
<h3>Building from Source<a class="headerlink" href="#building-from-source" title="Permalink to this heading">¶</a></h3>
<p>If you’ve installed the Teleport Unity SDK as a prebuilt package, you’re ready to go. But if you’re building the Teleport C++ Server SDK from source, you’ll need to follow the instructions in the Server section of this documentation.
Use CMakeGui to set:</p>
<ul class="simple">
<li><p>TELEPORT_SERVER to true</p></li>
<li><p>TELEPORT_UNITY to true</p></li>
<li><p>TELEPORT_UNITY_EDITOR_DIR to the folder where Unity.exe resides.</p></li>
<li><p>TELEPORT_UNITY_PLUGINS_DIR to the folder Plugins/x86_64 in the Teleport Unity assets folder, so that the C++ SDK will build TeleportServer.dll to that directory.</p></li>
<li><p>TELEPORT_UNITY_PROJECT_DIR to the root folder of your Unity project.</p></li>
</ul>
<p>Then build the Teleport_Server_Unity.sln solution. You can run Unity as normal, or debug the C++ code by setting TeleportServer as the active C++ project in the solution, and launching it for debugging.</p>
</section>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this heading">¶</a></h2>
<p>First, select the Teleport render pipeline. This adds functionality for video streaming and lighting generation. In the <em>Edit</em> menu, under <em>Project Settings…</em>, select <em>Graphics</em>. Set the Scriptable Render Pipeline Settings
object to point to the Default Teleport Render Pipeline, found in Teleport/Resources.</p>
<a class="reference internal image-reference" href="../_images/RenderPipelineAsset.png"><img alt="Activate the Teleport render pipeline in the Project Settings/Graphics panel." src="../_images/RenderPipelineAsset.png" style="width: 600px;" /></a>
<p><strong>Graphics Project Settings panel</strong></p>
<p>You can also create a Teleport Render Pipeline asset in the Content window with Create/Rendering/Teleport Render Pipeline Asset.</p>
<p>For global settings for the plugin, in the Project Settings panel, select <em>Teleport VR</em>.</p>
<a class="reference internal image-reference" href="../_images/ProjectSettings.png"><img alt="Teleport has a page on the Project Settings panel." src="../_images/ProjectSettings.png" style="width: 600px;" /></a>
<p><strong>Teleport Project Settings panel</strong></p>
</section>
<section id="id1">
<h2>Usage<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h2>
<p>You can create a GameObject in Unity that has the Monitor component. If not, one will be created when you run the project.</p>
<p>When running, the server awaits connections via the Teleport protocol. When a client connects, the server creates a player instance.</p>
</section>
<section id="inputs">
<h2>Inputs<a class="headerlink" href="#inputs" title="Permalink to this heading">¶</a></h2>
<p>To show the Inputs Panel, select Inputs from the Teleport VR menu on the main menu bar.
Here, you can specify the inputs you want to receive from connected clients.</p>
<a class="reference internal image-reference" href="../_images/InputsPanel.png"><img alt="Teleport has a page on the Project Settings panel." src="../_images/InputsPanel.png" style="width: 600px;" /></a>
<p><strong>Teleport Inputs Panel in Unity Editor</strong></p>
<p>There are three elements to each input. The Name is arbitrary, but should be unique in the application. The Type specifies what kind of input this is. A Float input is floating-point, while a boolean is either on or off, true or false. A state input is updated continuously, whereas an Event input is only updated when it changes. Finally, the input’s <em>Path</em> is how the client knows what to map it to.</p>
<p>Teleport VR clients use <a class="reference external" href="https://www.khronos.org/registry/OpenXR/specs/1.0/html/xrspec.html#semantic-path-interaction-profiles">OpenXR interaction profiles</a> to know what inputs the XR hardware provides. Each input (buttons, triggers, poses etc) has a <em>path</em> that is mapped by the OpenXR runtime on the client device.
When a Teleport client connects, it tries to match the path of each server-specified Teleport input to the OpenXR paths of its hardware. If any part of the OpenXR path matches the Teleport path, the mapping is made.
One or more Teleport inputs can be mapped to a single OpenXR input if the paths match.
Teleport input paths use <a class="reference external" href="https://en.wikipedia.org/wiki/Regular_expression">Regular Expression</a> syntax to match OpenXR paths.</p>
<p>For example, if the client recognizes your hardware as supporting the <a class="reference external" href="https://www.khronos.org/registry/OpenXR/specs/1.0/html/xrspec.html#_oculus_touch_controller_profile">Oculus Touch Controller Profile</a>:</p>
<blockquote>
<div><p>/interaction_profiles/oculus/touch_controller</p>
</div></blockquote>
<p>It will have the path:</p>
<blockquote>
<div><p>user/hand/left/input/x/click</p>
</div></blockquote>
<p>to represent the “x” button on the left-hand controller. We might specify a control:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Path</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Toggle Onscreen Display</p></td>
<td><p>Boolean Event</p></td>
<td><p>left/input/[a|x]/click</p></td>
</tr>
</tbody>
</table>
<p>The regex syntax [a|x] means “either ‘a’ or ‘x’”, so the client will recognize this as a match, and map the “x” button on the client-side controller to the “Toggle Onscreen Display” boolean event that the server will receive.</p>
<section id="mapping-types">
<h3>Mapping types<a class="headerlink" href="#mapping-types" title="Permalink to this heading">¶</a></h3>
<p>Different control types can be mapped to each other. If a path match is found, it is possible for a boolean (“click”) action, which is only on or off, to be mapped to an Analogue input.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Teleport / OpenXR</p></th>
<th class="head"><p>OpenXR Boolean</p></th>
<th class="head"><p>OpenXR float</p></th>
<th class="head"><p>OpenXR pose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Teleport Boolean</p></td>
<td><p>Yes</p></td>
<td><p>Yes, client decides</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p>Teleport Analogue</p></td>
<td><p>Yes: false=0.0, true=1.0</p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
</tr>
</tbody>
</table>
<p>The mapping of an OpenXR floating-point input to a Teleport Boolean input is determined by the client application. The usual method is by hysteresis, so when the control goes above a certain threshold, it will be considered to be “true”, and when it goes below a lower threshold, it will revert to “false”.
Teleport cannot map OpenXR Pose actions to inputs, these are handled differently.</p>
</section>
<section id="pose-mapping">
<h3>Pose Mapping<a class="headerlink" href="#pose-mapping" title="Permalink to this heading">¶</a></h3>
<p>XR devices such as headsets, handsets and trackers report their state as a “pose”, containing position and orientation in space. These poses can be mapped to spatial nodes using the Teleport Controller component in Unity.</p>
<a class="reference internal image-reference" href="../_images/TeleportController.png"><img alt="Inspector properties of a teleport Controller component." src="../_images/TeleportController.png" style="width: 600px;" /></a>
<p>==Teleport controller component in Unity Inspector==</p>
<p>The “Pose Regex Path” for a controller is matched client-side to an OpenXR path representing a pose state. When this mapping occurs, the object will be controlled directly by the tracked controller on the client. The Teleport_Controller component can be added to any child of a Teleport_SessionComponent Game Object.</p>
</section>
</section>
<section id="player-session-hierarchy">
<h2>Player Session Hierarchy<a class="headerlink" href="#player-session-hierarchy" title="Permalink to this heading">¶</a></h2>
<p>Typically, the Unity Game Objects would be arranged as follows in Unity:</p>
<a class="reference internal image-reference" href="../_images/PlayerHierarchy.png"><img alt="Example player prefab hierarchy." src="../_images/PlayerHierarchy.png" style="width: 400px;" /></a>
<p>==Typical session and player hierarchy in Unity==</p>
<p>i.e. at the root, an object containing a Teleport_Session Component, which tracks client-specific session data. Below this, a Player object which may move in space. Below that, two controllers and a head tracking object.</p>
<ul>
<li><p>TeleportVR : Teleport_Session Component</p>
<ul>
<li><p>Player</p>
<blockquote>
<div><ul class="simple">
<li><p>Left Hand Controller: Teleport_Controller Component</p></li>
<li><p>Right Hand Controller: Teleport_Controller Component</p></li>
<li><p>Head: Teleport_Head Component</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</li>
</ul>
<dl class="cpp class">
<dt class="sig sig-object cpp">
<span class="target" id="classteleport_1_1_monitor"></span><span class="sig-name descname"><span class="pre">teleport.Monitor</span> <span class="pre">:</span> <span class="pre">MonoBehaviour</span></span></dt>
<dd><p>A singleton component which stores per-server-session state. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp">
<span class="target" id="classteleport_1_1_monitor_1a6ea49d2bf135c268eb6c7c045b42ec7e"></span><span class="sig-name descname"><span class="pre">delegate</span> <span class="pre">Teleport_SessionComponent</span> <span class="pre">CreateSession</span> <span class="pre">()</span></span></dt>
<dd><p>Create a new session, e.g. when a client connects. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp class">
<dt class="sig sig-object cpp">
<span class="target" id="classteleport_1_1_teleport___session_component"></span><span class="sig-name descname"><span class="pre">teleport.Teleport_SessionComponent</span> <span class="pre">:</span> <span class="pre">MonoBehaviour</span></span></dt>
<dd><p>This component manages a client session, so there is one <a class="reference internal" href="#classteleport_1_1_teleport___session_component"><span class="std std-ref">Teleport_SessionComponent</span></a> per session, and this typically is attached to the root GameObject of each client. </p>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../client/index.html" class="btn btn-neutral float-left" title="Client" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../reference/index.html" class="btn btn-neutral float-right" title="Reference Implementation" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018-2023, Simul Software Ltd.</p>
  </div> 

</footer>
        </div>
      </div>
    </div>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>